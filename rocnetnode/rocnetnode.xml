<!--
 Rocrail - Model Railroad Software

 Copyright (C) 2002-2013 Rob Versluis, Rocrail.net

 Without an official permission commercial use is not permitted.
 Forking this project is not permitted.  

 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-->
<Project name="RocNetNode" title="RocNet Node" docname="rocnetnodeapi">


  <object name="RocNetNode" use="node,trace,thread,socket,mutex" include="$rocint/public/digint">
    <struct name="Port" typedef="*iOPort">
      <var name="port" vt="int"/>
      <var name="ionr" vt="int"/>
      <var name="iotype" vt="int" remark="0=gpio, 1=i2c-0, 2=i2c-1"/>
      <var name="type" vt="int"/>
      <var name="delay" vt="int"/>
      <var name="ontimer" vt="unsigned long"/>
      <var name="offtimer" vt="unsigned long"/>
      <var name="invert" vt="Boolean"/>
      <var name="state" vt="Boolean"/>
      <var name="acktimer" vt="int"/>
      <var name="ackretry" vt="int"/>
      <var name="ackpending" vt="Boolean"/>
      <var name="blink" vt="Boolean"/>
    </struct>
    <struct name="MacroLine" typedef="*iOMacroLine">
      <var name="delay" vt="int"/>
      <var name="port" vt="int"/>
      <var name="type" vt="int"/>
      <var name="value" vt="int"/>
      <var name="blink" vt="Boolean"/>
      </struct>
    <struct name="Macro" typedef="*iOMacro">
	    <var name="slowdown" vt="int"/>
	    <var name="repeat" vt="int"/>
	    <var name="minutes" vt="int"/>
	    <var name="hours" vt="int"/>
	    <var name="wday" vt="int"/>
      <var name="line[16]" vt="struct MacroLine"/>
    </struct>
    <fun name="inst" vt="this">
      <param name="ini" vt="iONode"/>
    </fun>
    <fun name="Main" vt="int">
      <param name="inst" vt="this" remark="RocNetNode instance"/>
      <param name="argc" vt="int" remark="Commandline argument count"/>
      <param name="argv" vt="char**" remark="Commandline arguments"/>
    </fun>
    <fun name="shutdown" vt="Boolean"/>
    <fun name="stop" vt="void"/>
    <fun name="sysHalt" vt="void"/>
    <fun name="sysUpdate" vt="void">
      <param name="revision" vt="int"/>
    </fun>
    <data>
      <var name="ini" vt="iONode"/>
      <var name="digintini" vt="iONode"/>
      <var name="rfidini" vt="iONode"/>
      <var name="reader" vt="iOThread"/>
      <var name="scanner" vt="iOThread"/>
      <var name="macroprocessor" vt="iOThread"/>
      <var name="run" vt="Boolean"/>
      <var name="power" vt="Boolean"/>
      <var name="identack" vt="Boolean"/>
      <var name="iorc" vt="int"/>
      <var name="id" vt="int"/>
      <var name="addr" vt="const char*"/>
      <var name="port" vt="int"/>
      <var name="nrio" vt="int"/>
      <var name="readUDP" vt="iOSocket"/>
      <var name="writeUDP" vt="iOSocket"/>
      <var name="ports[129]" vt="iOPort"/>
      <var name="pDI" vt="iIDigInt"/>
      <var name="pRFID" vt="iIDigInt"/>
      <var name="i2cdevice" vt="const char*"/>
      <var name="i2cdescriptor" vt="int"/>
      <var name="iotype" vt="int"/>
      <var name="ip[6]" vt="int"/>
      <var name="ipsize" vt="int"/>
      <var name="iomap[8]" vt="int"/>
      <var name="i2caddr[8]" vt="Boolean"/>
      <var name="iodata[16]" vt="byte"/>
      <var name="sack" vt="Boolean"/>
      <var name="rfid" vt="Boolean"/>
      <var name="i2cmux" vt="iOMutex"/>
      <var name="startofday" vt="Boolean"/>
      <var name="LED1" vt="int"/>
      <var name="LED2" vt="int"/>
      <var name="PB1" vt="int"/>
      <var name="LED1timer" vt="int"/>
      <var name="LED2timer" vt="int"/>
      <var name="PB1timer" vt="int"/>
      <var name="show" vt="Boolean"/>
      <var name="cstype" vt="int"/>
      <var name="csdevice" vt="int"/>
      <var name="inifile" vt="const char*"/>
      <var name="libpath" vt="const char*"/>
      <var name="consoleMode" vt="Boolean"/>
      <var name="pendingHalt" vt="Boolean"/>
      <var name="macro[129]" vt="iOMacro"/>
    </data>
  </object>


</Project>
